<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src='lib/quintus.js'></script>
        <script src='lib/quintus_sprites.js'></script>
        <script src='lib/quintus_scenes.js'></script>
        <script src='lib/quintus_input.js'></script>
        <script src='lib/quintus_anim.js'></script>
        <script src='lib/quintus_2d.js'></script>
        <script src='lib/quintus_touch.js'></script>
        <script src='lib/quintus_ui.js'></script>
        <script src='lib/quintus_audio.js'></script>
    </head>
    <body style="background-color: black;">
        <script>
        var Q = Quintus({audioSupported:['ogg'] })
            .include("Sprites, Scenes, Input, 2D, Touch, UI")
            .setup({
                width: 1000,
                height: 600,
                development: true
            }).controls().touch();

        Q.include("Audio").enableSound();

        //player
        Q.Sprite.extend("Player",{
            init: function(p) {
              this._super(p, { asset: "player.png", x: 110, y: 130, jumpSpeed: -890});
              this.add('2d, platformerControls');              
            },
            step: function(dt) {
                if(Q.inputs['left'] && this.p.direction == 'right') {
                    this.p.flip = 'x';
                } 
                if(Q.inputs['right']  && this.p.direction == 'left') {
                    this.p.flip = false;                    
                }
            }                    
          });
                       
        
        Q.scene("level1",function(stage) {

            var background = new Q.TileLayer({ dataAsset: 'lvl_01.tmx', layerIndex: 0, sheet: 'tiles', tileW: 50, tileH: 50, type: Q.SPRITE_NONE });
            stage.insert(background);

            stage.collisionLayer(new Q.TileLayer({ dataAsset: 'lvl_01.tmx', layerIndex:1,  sheet: 'tiles', tileW: 50, tileH: 50}));

            var player = stage.insert(new Q.Player());

            stage.add("viewport").follow(player,{x: true, y: true},{minX: 0, maxX: background.p.w, minY: 0, maxY: background.p.h});
        });

        //load assets
        Q.load("Tiles.png, player.png, lvl_01.tmx, bg.ogg, creek.ogg", function() {
          Q.sheet("tiles","Tiles.png", { tilew: 50, tileh: 50});
          Q.stageScene("level1");
          Q.audio.play('bg.ogg', {loop: true});
          Q.audio.play('creek.ogg', {loop: true});
        });

        </script>
    </body>
</html>
